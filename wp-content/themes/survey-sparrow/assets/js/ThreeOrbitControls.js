function OrbitControlsModified(t){function e(e){this.object=e,this.target=new t.Vector3,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.25;var n=this,o=1e-6,i=0,a=0,s=0,r=0,c=1,h=new t.Vector3,u=!1,l,m,d,p,b,g;this.getPolarAngle=function(){return a},this.getAzimuthalAngle=function(){return i},this.setPolarAngle=function(t){a=t,this.forceUpdate()},this.setAzimuthalAngle=function(t){i=t,this.forceUpdate()},this.rotateLeft=function(t){r-=t},this.rotateUp=function(t){s-=t},this.panLeft=(l=new t.Vector3,function t(e){var n=this.object.matrix.elements;l.set(n[0],n[1],n[2]),l.multiplyScalar(-e),h.add(l)}),this.panUp=function(){var e=new t.Vector3;return function t(n){var o=this.object.matrix.elements;e.set(o[4],o[5],o[6]),e.multiplyScalar(n),h.add(e)}}(),this.pan=function(e,o,i,a){if(n.object instanceof t.PerspectiveCamera){var s,r,c=n.object.position.clone().sub(n.target).length();c*=Math.tan(n.object.fov/2*Math.PI/180),n.panLeft(2*e*c/a),n.panUp(2*o*c/a)}else n.object instanceof t.OrthographicCamera?(n.panLeft(e*(n.object.right-n.object.left)/i),n.panUp(o*(n.object.top-n.object.bottom)/a)):console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled.")},this.dollyIn=function(e){n.object instanceof t.PerspectiveCamera?c/=e:n.object instanceof t.OrthographicCamera?(n.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom*e)),n.object.updateProjectionMatrix(),u=!0):console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.")},this.dollyOut=function(e){n.object instanceof t.PerspectiveCamera?c*=e:n.object instanceof t.OrthographicCamera?(n.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/e)),n.object.updateProjectionMatrix(),u=!0):console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.")},this.forceUpdate=(m=new t.Vector3,d=(new t.Quaternion).setFromUnitVectors(e.up,new t.Vector3(0,1,0)),p=d.clone().inverse(),b=new t.Vector3,g=new t.Quaternion,function(){var t=this.object.position;m.copy(t).sub(this.target),m.applyQuaternion(d),i=Math.max(this.minAzimuthAngle,Math.min(this.maxAzimuthAngle,i)),a=Math.max(this.minPolarAngle,Math.min(this.maxPolarAngle,a)),a=Math.max(o,Math.min(Math.PI-o,a));var e=m.length()*c;return e=Math.max(this.minDistance,Math.min(this.maxDistance,e)),this.target.add(h),m.x=e*Math.sin(a)*Math.sin(i),m.y=e*Math.cos(a),m.z=e*Math.sin(a)*Math.cos(i),m.applyQuaternion(p),t.copy(this.target).add(m),this.object.lookAt(this.target),!0===this.enableDamping?(r*=1-this.dampingFactor,s*=1-this.dampingFactor):(r=0,s=0),c=1,h.set(0,0,0),!!(u||b.distanceToSquared(this.object.position)>o||8*(1-g.dot(this.object.quaternion))>o)&&(b.copy(this.object.position),g.copy(this.object.quaternion),u=!1,!0)}),this.update=function(){var n=new t.Vector3,l=(new t.Quaternion).setFromUnitVectors(e.up,new t.Vector3(0,1,0)),m=l.clone().inverse(),d=new t.Vector3,p=new t.Quaternion;return function(){var t=this.object.position;n.copy(t).sub(this.target),n.applyQuaternion(l),i=Math.atan2(n.x,n.z),a=Math.atan2(Math.sqrt(n.x*n.x+n.z*n.z),n.y),i+=r,a+=s,i=Math.max(this.minAzimuthAngle,Math.min(this.maxAzimuthAngle,i)),a=Math.max(this.minPolarAngle,Math.min(this.maxPolarAngle,a)),a=Math.max(o,Math.min(Math.PI-o,a));var e=n.length()*c;return e=Math.max(this.minDistance,Math.min(this.maxDistance,e)),this.target.add(h),n.x=e*Math.sin(a)*Math.sin(i),n.y=e*Math.cos(a),n.z=e*Math.sin(a)*Math.cos(i),n.applyQuaternion(m),t.copy(this.target).add(n),this.object.lookAt(this.target),!0===this.enableDamping?(r*=1-this.dampingFactor,s*=1-this.dampingFactor):(r=0,s=0),c=1,h.set(0,0,0),!!(u||d.distanceToSquared(this.object.position)>o||8*(1-p.dot(this.object.quaternion))>o)&&(d.copy(this.object.position),p.copy(this.object.quaternion),u=!1,!0)}}()}function n(n,o){function i(t,e){var n=f.domElement===document?f.domElement.body:f.domElement;g.pan(t,e,n.clientWidth,n.clientHeight)}function a(){return 2*Math.PI/60/60*f.autoRotateSpeed}function s(){return Math.pow(.95,f.zoomSpeed)}function r(t){if(!1!==f.enabled){if(t.preventDefault(),t.button===f.mouseButtons.ORBIT){if(!1===f.enableRotate)return;j=T.ROTATE,E.set(t.clientX,t.clientY)}else if(t.button===f.mouseButtons.ZOOM){if(!1===f.enableZoom)return;j=T.DOLLY,P.set(t.clientX,t.clientY)}else if(t.button===f.mouseButtons.PAN){if(!1===f.enablePan)return;j=T.PAN,O.set(t.clientX,t.clientY)}j!==T.NONE&&(document.addEventListener("mousemove",c,!1),document.addEventListener("mouseup",h,!1),f.dispatchEvent(R))}}function c(t){if(!1!==f.enabled){t.preventDefault();var e=f.domElement===document?f.domElement.body:f.domElement;if(j===T.ROTATE){if(!1===f.enableRotate)return;v.set(t.clientX,t.clientY),y.subVectors(v,E),g.rotateLeft(2*Math.PI*y.x/e.clientWidth*f.rotateSpeed),g.rotateUp(2*Math.PI*y.y/e.clientHeight*f.rotateSpeed),E.copy(v)}else if(j===T.DOLLY){if(!1===f.enableZoom)return;w.set(t.clientX,t.clientY),x.subVectors(w,P),x.y>0?g.dollyIn(s()):x.y<0&&g.dollyOut(s()),P.copy(w)}else if(j===T.PAN){if(!1===f.enablePan)return;A.set(t.clientX,t.clientY),M.subVectors(A,O),i(M.x,M.y),O.copy(A)}j!==T.NONE&&f.update()}}function h(){!1!==f.enabled&&(document.removeEventListener("mousemove",c,!1),document.removeEventListener("mouseup",h,!1),f.dispatchEvent(D),j=T.NONE)}function u(t){if(!1!==f.enabled&&!1!==f.enableZoom&&j===T.NONE){t.preventDefault(),t.stopPropagation();var e=0;void 0!==t.wheelDelta?e=t.wheelDelta:void 0!==t.detail&&(e=-t.detail),e>0?g.dollyOut(s()):e<0&&g.dollyIn(s()),f.update(),f.dispatchEvent(R),f.dispatchEvent(D)}}function l(t){if(!1!==f.enabled&&!1!==f.enableKeys&&!1!==f.enablePan)switch(t.keyCode){case f.keys.UP:i(0,f.keyPanSpeed),f.update();break;case f.keys.BOTTOM:i(0,-f.keyPanSpeed),f.update();break;case f.keys.LEFT:i(f.keyPanSpeed,0),f.update();break;case f.keys.RIGHT:i(-f.keyPanSpeed,0),f.update();break}}function m(t){if(!1!==f.enabled){switch(t.touches.length){case 1:if(!1===f.enableRotate)return;j=T.TOUCH_ROTATE,E.set(t.touches[0].pageX,t.touches[0].pageY);break;case 2:if(!1===f.enableZoom)return;j=T.TOUCH_DOLLY;var e=t.touches[0].pageX-t.touches[1].pageX,n=t.touches[0].pageY-t.touches[1].pageY,o=Math.sqrt(e*e+n*n);P.set(0,o);break;case 3:if(!1===f.enablePan)return;j=T.TOUCH_PAN,O.set(t.touches[0].pageX,t.touches[0].pageY);break;default:j=T.NONE}j!==T.NONE&&f.dispatchEvent(R)}}function d(t){if(!1!==f.enabled){t.preventDefault(),t.stopPropagation();var e=f.domElement===document?f.domElement.body:f.domElement;switch(t.touches.length){case 1:if(!1===f.enableRotate)return;if(j!==T.TOUCH_ROTATE)return;v.set(t.touches[0].pageX,t.touches[0].pageY),y.subVectors(v,E),g.rotateLeft(2*Math.PI*y.x/e.clientWidth*f.rotateSpeed),g.rotateUp(2*Math.PI*y.y/e.clientHeight*f.rotateSpeed),E.copy(v),f.update();break;case 2:if(!1===f.enableZoom)return;if(j!==T.TOUCH_DOLLY)return;var n=t.touches[0].pageX-t.touches[1].pageX,o=t.touches[0].pageY-t.touches[1].pageY,a=Math.sqrt(n*n+o*o);w.set(0,a),x.subVectors(w,P),x.y>0?g.dollyOut(s()):x.y<0&&g.dollyIn(s()),P.copy(w),f.update();break;case 3:if(!1===f.enablePan)return;if(j!==T.TOUCH_PAN)return;A.set(t.touches[0].pageX,t.touches[0].pageY),M.subVectors(A,O),i(M.x,M.y),O.copy(A),f.update();break;default:j=T.NONE}}}function p(){!1!==f.enabled&&(f.dispatchEvent(D),j=T.NONE)}function b(t){t.preventDefault()}var g=new e(n);this.domElement=void 0!==o?o:document,Object.defineProperty(this,"constraint",{get:function(){return g}}),this.getPolarAngle=function(){return g.getPolarAngle()},this.getAzimuthalAngle=function(){return g.getAzimuthalAngle()},this.setPolarAngle=function(t){return g.setPolarAngle(t)},this.setAzimuthalAngle=function(t){return g.setAzimuthalAngle(t)},this.enabled=!0,this.center=this.target,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.enableKeys=!0,this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},this.mouseButtons={ORBIT:t.MOUSE.LEFT,ZOOM:t.MOUSE.MIDDLE,PAN:t.MOUSE.RIGHT};var f=this,E=new t.Vector2,v=new t.Vector2,y=new t.Vector2,O=new t.Vector2,A=new t.Vector2,M=new t.Vector2,P=new t.Vector2,w=new t.Vector2,x=new t.Vector2,T={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_DOLLY:4,TOUCH_PAN:5},j=T.NONE;this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom;var L={type:"change"},R={type:"start"},D={type:"end"};this.update=function(){this.autoRotate&&j===T.NONE&&g.rotateLeft(a()),!0===g.update()&&this.dispatchEvent(L)},this.reset=function(){j=T.NONE,this.target.copy(this.target0),this.object.position.copy(this.position0),this.object.zoom=this.zoom0,this.object.updateProjectionMatrix(),this.dispatchEvent(L),this.update()},this.dispose=function(){this.domElement.removeEventListener("contextmenu",b,!1),this.domElement.removeEventListener("mousedown",r,!1),this.domElement.removeEventListener("mousewheel",u,!1),this.domElement.removeEventListener("MozMousePixelScroll",u,!1),this.domElement.removeEventListener("touchstart",m,!1),this.domElement.removeEventListener("touchend",p,!1),this.domElement.removeEventListener("touchmove",d,!1),document.removeEventListener("mousemove",c,!1),document.removeEventListener("mouseup",h,!1),window.removeEventListener("keydown",l,!1)},this.domElement.addEventListener("contextmenu",b,!1),this.domElement.addEventListener("mousedown",r,!1),this.domElement.addEventListener("mousewheel",u,!1),this.domElement.addEventListener("MozMousePixelScroll",u,!1),this.domElement.addEventListener("touchstart",m,!1),this.domElement.addEventListener("touchend",p,!1),this.domElement.addEventListener("touchmove",d,!1),window.addEventListener("keydown",l,!1),this.update()}var o=t.MOUSE;return o||(o={LEFT:0,MIDDLE:1,RIGHT:2}),n.prototype=Object.create(t.EventDispatcher.prototype),n.prototype.constructor=n,Object.defineProperties(n.prototype,{object:{get:function(){return this.constraint.object}},target:{get:function(){return this.constraint.target},set:function(t){console.warn("THREE.OrbitControls: target is now immutable. Use target.set() instead."),this.constraint.target.copy(t)}},minDistance:{get:function(){return this.constraint.minDistance},set:function(t){this.constraint.minDistance=t}},maxDistance:{get:function(){return this.constraint.maxDistance},set:function(t){this.constraint.maxDistance=t}},minZoom:{get:function(){return this.constraint.minZoom},set:function(t){this.constraint.minZoom=t}},maxZoom:{get:function(){return this.constraint.maxZoom},set:function(t){this.constraint.maxZoom=t}},minPolarAngle:{get:function(){return this.constraint.minPolarAngle},set:function(t){this.constraint.minPolarAngle=t}},maxPolarAngle:{get:function(){return this.constraint.maxPolarAngle},set:function(t){this.constraint.maxPolarAngle=t}},minAzimuthAngle:{get:function(){return this.constraint.minAzimuthAngle},set:function(t){this.constraint.minAzimuthAngle=t}},maxAzimuthAngle:{get:function(){return this.constraint.maxAzimuthAngle},set:function(t){this.constraint.maxAzimuthAngle=t}},enableDamping:{get:function(){return this.constraint.enableDamping},set:function(t){this.constraint.enableDamping=t}},dampingFactor:{get:function(){return this.constraint.dampingFactor},set:function(t){this.constraint.dampingFactor=t}},noZoom:{get:function(){return console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),!this.enableZoom},set:function(t){console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),this.enableZoom=!t}},noRotate:{get:function(){return console.warn("THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead."),!this.enableRotate},set:function(t){console.warn("THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead."),this.enableRotate=!t}},noPan:{get:function(){return console.warn("THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead."),!this.enablePan},set:function(t){console.warn("THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead."),this.enablePan=!t}},noKeys:{get:function(){return console.warn("THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead."),!this.enableKeys},set:function(t){console.warn("THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead."),this.enableKeys=!t}},staticMoving:{get:function(){return console.warn("THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead."),!this.constraint.enableDamping},set:function(t){console.warn("THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead."),this.constraint.enableDamping=!t}},dynamicDampingFactor:{get:function(){return console.warn("THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),this.constraint.dampingFactor},set:function(t){console.warn("THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),this.constraint.dampingFactor=t}}}),n}OrbitControls=OrbitControlsModified(THREE);